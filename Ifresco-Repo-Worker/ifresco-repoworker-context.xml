<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN 2.0//EN' 'http://www.springframework.org/dtd/spring-beans-2.0.dtd'>

<beans>
<!-- 1. Schritt: Definition des Script-Repo-Workers mit den beiden JavaScripts -->
        <bean id="myWorker1" parent="ifresco.tools.repoworker.ScriptingRepoWorkerParent">
<!-- Namen der Scripts unter /Data Dictionary/ifresco/repoworker -->
                <property name="providerJavaScriptNode" value="provideNodesForProcessingWithAutoOCR.js" />
                <property name="processorJavaScriptNode" value="processNodeWithAutoOCR.js" />
<!-- Wie viele Worker Threads sollen die Queue gleichzeitig abarbeiten?  -->
                <property name="reProcessThreads" value="2" />
<!-- Größe der Transaktionen  -->
                <property name="reProcessBatchSize" value="100" />
        </bean>

<!-- 2. Schritt: Definition des Jobs für eine zeitgesteuerte Ausführen -->
        <bean id="myJob1" 
                class="org.springframework.scheduling.quartz.JobDetailBean">
                <property name="jobClass" 
                        value="ifresco.tools.repoworker.ScriptingRepoWorkerJob" />
                <property name="jobDataAsMap">
                        <map>
<!-- hier muss die Worker Bean von oben refernziert werden -->
                                <entry key="scriptingRepoWorker" value-ref="myWorker1" />
                        </map>
                </property>
        </bean>

<!-- 3. Schritt: Definition des Job Triggers per Cron-Expression -->
        <bean id="myTrigger1" 
                class="org.alfresco.util.CronTriggerBean">
<!-- hier muss der Job von oben referenziert werden -->
                <property name="jobDetail" ref="myJob1" />
                <property name="scheduler" ref="schedulerFactory" />
                <property name="cronExpression" value="0 0/5 * * * ?" />
        </bean>
</beans>